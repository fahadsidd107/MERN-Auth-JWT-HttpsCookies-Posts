(this.webpackJsonpproject=this.webpackJsonpproject||[]).push([[0],{216:function(e,a,t){},217:function(e,a,t){},348:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),i=t(42),c=t.n(i),s=(t(216),t.p+"static/media/logo.6ce24c58.svg"),o=(t(217),"localhost"===window.location.hostname.split(":")[0]?"http://localhost:7000":""),l=t(45),d=t.n(l),j=t(23),u=(t(236),t(399)),b=t(398),h=t(401),m=t(1);var p=function(){return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("div",{style:{backgroundColor:"#181415",width:"100%",height:"100vh"},children:Object(m.jsx)("img",{style:{width:"100%",position:"fixed",bottom:"0px"},src:s,alt:""})})})},O=t(79),x=t(388),g=t(400),v=t(408),f=t(44),w=t(12),y=t(6),C=function(e,a){switch(a.type){case"USER_LOGIN":return a.payload.name&&a.payload.email&&a.payload._id?Object(y.a)(Object(y.a)({},e),{},{user:a.payload}):(console.log("invalid data in USER_LOGIN reducer "),e);case"USER_LOGOUT":return Object(y.a)(Object(y.a)({},e),{},{user:null});case"TOGGLE_THEME":return Object(y.a)(Object(y.a)({},e),{},{darkTheme:!e.darkTheme});default:return e}},S=Object(n.createContext)("Initial Value"),E={darkTheme:!0,user:void 0};function L(e){var a=e.children,t=Object(n.useReducer)(C,E),r=Object(w.a)(t,2),i=r[0],c=r[1];return Object(m.jsx)(S.Provider,{value:{state:i,dispatch:c},children:a})}var T=f.a({email:f.b("Enter your email").email("Enter a valid email").required("Email is required"),password:f.b("Enter your password").min(8,"Password should be of minimum 8 characters length").max(10,"No more then 10").required("Password is required")});var k=function(){Object(j.f)();var e=Object(n.useContext)(S),a=(e.state,e.dispatch),t=Object(O.a)({validationSchema:T,initialValues:{email:"",password:""},onSubmit:function(e){console.log("values: ",e),d.a.post("".concat(o,"/api/v1/login"),{email:e.email,password:e.password},{withCredentials:!0}).then((function(e){console.log("res: ",e.data),e.data.email&&a({type:"USER_LOGIN",payload:{name:e.data.name,email:e.data.email,_id:e.data._id}})}))}});return Object(m.jsxs)("div",{style:{margin:"2rem"},children:[Object(m.jsx)("h1",{children:"Login page"}),Object(m.jsx)("form",{onSubmit:t.handleSubmit,children:Object(m.jsxs)(x.a,{spacing:2,children:[Object(m.jsx)(g.a,{fullWidth:!0,color:"primary",id:"outlined-basic",label:"Email",variant:"outlined",name:"email",value:t.values.email,onChange:t.handleChange,error:t.touched.email&&Boolean(t.errors.email),helperText:t.touched.email&&t.errors.email}),Object(m.jsx)(g.a,{fullWidth:!0,color:"primary",id:"filled-basic",label:"Password",variant:"outlined",type:"password",name:"password",value:t.values.password,onChange:t.handleChange,error:t.touched.password&&Boolean(t.errors.password),helperText:t.touched.password&&t.errors.password}),Object(m.jsx)(v.a,{fullWidth:!0,variant:"contained",color:"primary",type:"submit",children:"Login"})]})})]})},G=f.a({name:f.b("Enter your name").required("Name is required"),email:f.b("Enter your email").email("Enter a valid email").required("Email is required"),password:f.b("Enter your password").min(8,"Password should be of minimum 8 characters length").max(10,"No more then 10").required("Password is required")});var P=function(){var e=Object(O.a)({validationSchema:G,initialValues:{name:"",email:"",password:""},onSubmit:function(e){d.a.post("".concat(o,"/api/v1/signup"),{name:e.name,email:e.email,password:e.password}).then((function(e){console.log("res: ",e.data)}))}});return Object(m.jsxs)("div",{style:{margin:"2rem"},children:[Object(m.jsx)("h1",{children:"Signup page"}),Object(m.jsx)("form",{onSubmit:e.handleSubmit,children:Object(m.jsxs)(x.a,{spacing:2,children:[Object(m.jsx)(g.a,{fullWidth:!0,color:"primary",id:"outlined-basic",label:"Full Name",variant:"outlined",name:"name",value:e.values.name,onChange:e.handleChange,error:e.touched.name&&Boolean(e.errors.name),helperText:e.touched.name&&e.errors.name}),Object(m.jsx)(g.a,{fullWidth:!0,color:"primary",id:"outlined-basic",label:"Email",variant:"outlined",name:"email",value:e.values.email,onChange:e.handleChange,error:e.touched.email&&Boolean(e.errors.email),helperText:e.touched.email&&e.errors.email}),Object(m.jsx)(g.a,{fullWidth:!0,color:"primary",id:"filled-basic",label:"Password",variant:"outlined",type:"password",name:"password",value:e.values.password,onChange:e.handleChange,error:e.touched.password&&Boolean(e.errors.password),helperText:e.touched.password&&e.errors.password}),Object(m.jsx)(v.a,{fullWidth:!0,variant:"contained",color:"primary",type:"submit",children:"Signup"})]})})]})},_=t(410),U=t(409),q=t(411),R=t(413),W=t(412),B=t(115),N=t.n(B);var F=function(){var e=Object(j.f)(),a=Object(n.useContext)(S),t=a.state,r=a.dispatch,i=Object(n.useState)({}),c=Object(w.a)(i,2),s=(c[0],c[1]);return Object(n.useEffect)((function(){d.a.get("".concat(o,"/api/v1/profile"),{withCredentials:!0}).then((function(e){console.log("res +++: ",e.data),s(e.data)}))}),[]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(U.a,{sx:{flexGrow:1},children:Object(m.jsx)(_.a,{position:"static",children:Object(m.jsxs)(q.a,{children:[Object(m.jsx)(W.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},children:Object(m.jsx)(N.a,{})}),Object(m.jsxs)(R.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:["Welcome ",t.user.name]}),Object(m.jsx)(v.a,{onClick:function(){e.push("/")},variant:"contained",color:"error",children:"Posts"}),Object(m.jsx)(v.a,{onClick:function(){e.push("/"),r({type:"USER_LOGOUT",payload:null})},variant:"contained",color:"error",children:"Logout"})]})})}),Object(m.jsx)("h1",{style:{margin:"auto",padding:"1rem",textAlign:"center"},children:"Profile Info"}),Object(m.jsx)("br",{}),Object(m.jsxs)(R.a,{gutterBottom:!0,children:["Name: ",t.user.name,Object(m.jsx)("br",{}),"Email: ",t.user.email,Object(m.jsx)("br",{}),"Contact: ",t.user.contact,Object(m.jsx)("br",{}),"website: ",t.user.website,Object(m.jsx)("br",{}),"Address: ",t.user.address]}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{})]})},I=(t(16),t(405)),A=t(416),M=t(417),V=t(418),z=t(419),D=t(406),J=t(191),H=t.n(J),K=t(192),Q=t.n(K),X=t(190),Y=t.n(X),Z=t(4),$=t(414),ee=(t(415),t(189),Object(Z.a)($.a)((function(e){var a=e.theme;return{"& .MuiDialogContent-root":{padding:a.spacing(2)},"& .MuiDialogActions-root":{padding:a.spacing(1)}}})),f.a({post:f.b("add something ").required("required*")}));var ae=function(){var e,a=n.useState(!1),t=Object(w.a)(a,2),r=(t[0],t[1],Object(j.f)()),i=Object(n.useContext)(S),c=i.state,l=i.dispatch,u=Object(O.a)({validationSchema:ee,initialValues:{post:"",createdby:""},onSubmit:function(e){var a;console.log("values: ",e),(null===c||void 0===c||null===(a=c.user)||void 0===a?void 0:a.name)&&d.a.post("".concat(o,"/api/v1/posts"),{post:e.post,createdby:c.user.name}).then((function(e){console.log(e.data),L(!E)}))}}),b=Object(n.useState)([]),h=Object(w.a)(b,2),p=h[0],f=h[1],y=Object(n.useState)(!1),C=Object(w.a)(y,2),E=C[0],L=C[1];return Object(n.useEffect)((function(){return d.a.get("".concat(o,"/api/v1/posts")).then((function(e){console.log(e.data),f(e.data)})),function(){console.log("post shown")}}),[E]),Object(m.jsxs)("div",{children:[Object(m.jsx)(U.a,{sx:{flexGrow:1},children:Object(m.jsx)(_.a,{position:"static",children:Object(m.jsxs)(q.a,{children:[Object(m.jsx)(W.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},children:Object(m.jsx)(N.a,{})}),Object(m.jsxs)(R.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:["Welcome ",c.user.name]}),Object(m.jsx)(v.a,{onClick:function(){r.push("/profile")},variant:"contained",color:"error",children:"Profile"}),Object(m.jsx)(v.a,{onClick:function(){r.push("/"),l({type:"USER_LOGOUT",payload:null})},variant:"contained",color:"error",children:"Logout"})]})})}),Object(m.jsxs)("div",{style:{padding:"1rem"},children:[Object(m.jsx)("h1",{style:{margin:"auto",padding:"1rem",textAlign:"center"},children:"POSTS"}),Object(m.jsx)("br",{}),Object(m.jsx)("form",{onSubmit:u.handleSubmit,children:Object(m.jsx)("div",{children:Object(m.jsxs)(I.a,{container:!0,spacing:1,sx:{paddingLeft:"10%",paddingRight:"10%"},children:[Object(m.jsx)(I.a,{item:!0,xl:8,lg:8,xs:12,sm:12,md:12,children:Object(m.jsx)(I.a,{children:Object(m.jsx)(x.a,{spacing:3,children:Object(m.jsx)(g.a,{color:"primary",id:"outlined-basic",variant:"outlined",placeholder:"Whats in your mind",name:"post",value:u.values.post,onChange:u.handleChange,error:u.touched.post&&Boolean(u.errors.post),helperText:u.touched.post&&u.errors.post})})})}),Object(m.jsx)(I.a,{item:!0,xl:2,lg:2,xs:12,sm:4,md:4,children:Object(m.jsx)(I.a,{children:Object(m.jsx)(v.a,{sx:{height:"35px",width:"100%",fontSize:"12px"},variant:"contained",color:"info",type:"submit",children:"POST"})})})]})})}),Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),(null===c||void 0===c||null===(e=c.user)||void 0===e?void 0:e.name)&&p.map((function(e){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(A.a,{sx:{maxWidth:845,margin:"auto"},children:[Object(m.jsx)(M.a,{avatar:Object(m.jsx)(D.a,{sx:{backgroundColor:"transparent"},"aria-label":"profile",children:Object(m.jsx)("img",{style:{width:"50px"},src:s})}),action:Object(m.jsx)(W.a,{"aria-label":"settings",children:Object(m.jsx)(Y.a,{})}),title:e.createdby}),Object(m.jsx)(V.a,{children:Object(m.jsx)(R.a,{variant:"body2",color:"text.secondary",children:e.post})}),Object(m.jsxs)(z.a,{disableSpacing:!0,children:[Object(m.jsx)(W.a,{"aria-label":"add to favorites",children:Object(m.jsx)(H.a,{})}),Object(m.jsx)(W.a,{"aria-label":"share",children:Object(m.jsx)(Q.a,{})})]})]}),Object(m.jsx)("br",{})]})}))]})]})};var te=function(){var e=Object(j.f)(),a=Object(n.useContext)(S),t=a.state,r=a.dispatch;return Object(n.useEffect)((function(){return d.a.get("".concat(o,"/api/v1/profile"),{withCredentials:!0}).then((function(e){console.log("res: ",e.data),e.data.email?r({type:"USER_LOGIN",payload:{name:e.data.name,email:e.data.email,_id:e.data._id}}):r({type:"USER_LOGOUT"})})).catch((function(e){r({type:"USER_LOGOUT"})})),function(){}}),[]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(u.a,{bg:"light",expand:"lg",children:Object(m.jsxs)(b.a,{children:[Object(m.jsx)(u.a.Brand,{href:"#home",children:"React Login project"}),Object(m.jsx)(u.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(m.jsx)(u.a.Collapse,{id:"basic-navbar-nav",children:Object(m.jsxs)(h.a,{className:"me-auto",children:[Object(m.jsx)(h.a.Link,{onClick:function(){e.push("/")},children:"Profile"}),Object(m.jsx)(h.a.Link,{onClick:function(){e.push("/")},children:"Login"}),Object(m.jsx)(h.a.Link,{onClick:function(){e.push("/signup")},children:"Signup"})]})})]})}),void 0===t.user?Object(m.jsx)(j.c,{children:Object(m.jsx)(j.a,{exact:!0,path:"/",children:Object(m.jsx)(p,{})})}):null,null===t.user?Object(m.jsxs)(j.c,{children:[Object(m.jsx)(j.a,{exact:!0,path:"/",component:k}),Object(m.jsx)(j.a,{path:"/signup",component:P})]}):null,t.user?Object(m.jsxs)(j.c,{children:[Object(m.jsx)(j.a,{exact:!0,path:"/",children:Object(m.jsx)(ae,{})}),Object(m.jsx)(j.a,{exact:!0,path:"/profile",children:Object(m.jsx)(F,{})})]}):null]})},ne=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,421)).then((function(a){var t=a.getCLS,n=a.getFID,r=a.getFCP,i=a.getLCP,c=a.getTTFB;t(e),n(e),r(e),i(e),c(e)}))},re=t(72);c.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(L,{children:Object(m.jsx)(re.a,{children:Object(m.jsx)(te,{})})})}),document.getElementById("root")),ne()}},[[348,1,2]]]);
//# sourceMappingURL=main.f6748f84.chunk.js.map